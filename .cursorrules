# Employee Nexus Frontend - Coding Standards

## ğŸ¯ Project Overview

This is a Next.js 14+ React application using TypeScript, GraphQL, and modern UI libraries.

## ğŸ“ Naming Conventions

### TypeScript Interfaces & Types

- **ALWAYS** prefix interface names with `I`
  - âœ… `interface IUserProps { ... }`
  - âœ… `interface IEmployee { ... }`
  - âŒ `interface UserProps { ... }`
- **ALWAYS** prefix type names with `I` when they represent object shapes
  - âœ… `type IFormData = { ... }`
  - âœ… `type ITableConfig = { ... }`

### Component Props

- Use `I` prefix for props interfaces
  - âœ… `interface ICustomTableProps { ... }`
  - âœ… `interface IPageHeaderProps { ... }`

### Files & Folders

- Components: PascalCase (e.g., `CustomTable.tsx`, `UserProfileCell.tsx`)
- Utilities: camelCase (e.g., `formatDate.ts`, `validateEmail.ts`)
- Constants: UPPER_SNAKE_CASE files (e.g., `API_ENDPOINTS.ts`)

## ğŸ¬ Animation Standards

### Primary Animation Library

- **REQUIRED**: Use **Framer Motion** for all animations
  - âœ… `import { motion } from "motion/react"`
  - âŒ Do NOT use CSS animations for complex interactions
  - âŒ Do NOT use other animation libraries (anime.js, GSAP, etc.)

### When to Use Framer Motion

- âœ… Page transitions
- âœ… Component enter/exit animations
- âœ… Skeleton loaders
- âœ… Modal/dialog animations
- âœ… List stagger animations
- âœ… Hover/tap interactions that need orchestration

### Simple CSS Animations (Allowed)

- âœ… Simple hover states (`:hover` pseudo-class)
- âœ… Tailwind's `transition` utilities for basic transitions
- âœ… `animate-spin`, `animate-pulse` for simple effects

### Animation Best Practices

```tsx
// âœ… GOOD: Use variants for reusable animations
const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: { staggerChildren: 0.1 }
  }
};

// âœ… GOOD: Semantic variant names
<motion.div variants={cardVariants} initial="hidden" animate="visible">

// âŒ BAD: Inline animation objects
<motion.div animate={{ opacity: 1 }} initial={{ opacity: 0 }}>
```

## ğŸ¨ Styling Standards

### CSS Framework

- **Primary**: Tailwind CSS
- **Component Library**: DaisyUI (built on Tailwind)

### Gradient Classes

- Use `bg-linear-to-r`, `bg-linear-to-br` instead of `bg-gradient-to-r`
  - âœ… `className="bg-linear-to-br from-blue-50 to-blue-100"`
  - âŒ `className="bg-gradient-to-br from-blue-50 to-blue-100"`

### Custom Components

- Create reusable components for repeated UI patterns
- Examples: `UserProfileCell`, `StatusBadge`, `PageHeader`

## ğŸ“ Code Documentation

### Comments Style

- Use **UPPERCASE COMMENTS** for major sections
  - âœ… `// ==================== GRAPHQL QUERY: FETCH USERS ====================`
  - âœ… `// CUSTOM USER PROFILE COLUMN WITH AVATAR AND DESIGNATION`

### Function Documentation

- Add JSDoc comments for complex functions
- Document props interfaces with comments

## ğŸ—ï¸ Component Structure

### Standard Component Pattern

```tsx
"use client"; // For Next.js client components

import { ... } from "...";

// ==================== INTERFACES ====================
interface IComponentProps {
  // ... props
}

// ==================== COMPONENT ====================
export default function ComponentName({ ...props }: IComponentProps) {
  // ==================== HOOKS ====================
  const [state, setState] = useState();

  // ==================== HANDLERS ====================
  const handleClick = () => { ... };

  // ==================== RENDER ====================
  return (
    <div>...</div>
  );
}
```

## ğŸ”„ State Management

### GraphQL

- Use Apollo Client hooks (`useQuery`, `useMutation`)
- Always type GraphQL responses

```tsx
const { data, loading } = useQuery<{
  users: {
    data: IUser[];
    meta: IMeta;
  };
}>(GET_USERS);
```

### Local State

- Use `useState` for component state
- Use custom hooks for reusable logic
- Prefix custom hooks with `use` (e.g., `usePermissionGuard`, `usePopupOption`)

## ğŸ“¦ File Organization

### Import Order

1. React & Next.js imports
2. External libraries
3. Internal components
4. Types/Interfaces
5. Constants
6. Utilities
7. Styles

```tsx
// 1. React/Next
import { useState } from "react";
import { useRouter } from "next/navigation";

// 2. External libraries
import { useQuery } from "@apollo/client";
import { motion } from "motion/react";

// 3. Components
import CustomTable from "@/components/table/CustomTable";
import PageHeader from "@/components/ui/PageHeader";

// 4. Types
import type { IEmployee, ITableConfig } from "@/types";

// 5. Constants
import { Permissions } from "@/constants/permissions.constant";

// 6. GraphQL
import { GET_USERS } from "@/graphql/user.api";
```

## ğŸ¯ GraphQL Conventions

### Query/Mutation Naming

- Use UPPER_SNAKE_CASE for queries and mutations
  - âœ… `GET_USERS`, `CREATE_EMPLOYEE`, `UPDATE_USER_STATUS`
  - âŒ `getUsers`, `createEmployee`

### File Organization

- Group by domain: `user.api.ts`, `employee.api.ts`, `department.api.ts`

## âœ… Best Practices

### Type Safety

- **NEVER** use `any` unless absolutely necessary
- Prefer `unknown` over `any` when type is uncertain
- Use type guards for runtime type checking

### Error Handling

- Always handle GraphQL errors
- Use try-catch for async operations
- Provide user feedback via toast notifications

### Accessibility

- Use semantic HTML elements
- Add proper ARIA labels
- Ensure keyboard navigation works
- Maintain proper heading hierarchy

### Performance

- Use `useMemo` for expensive computations
- Use `useCallback` for memoized callbacks
- Implement proper loading states
- Use skeleton loaders (with Framer Motion) instead of spinners

## ğŸš« Anti-Patterns to Avoid

### Naming

- âŒ Interfaces without `I` prefix
- âŒ Magic numbers (use named constants)
- âŒ Unclear variable names (`data`, `temp`, `x`)

### Code Structure

- âŒ Inline styles (use Tailwind classes)
- âŒ Deeply nested ternaries (extract to variables/functions)
- âŒ Large component files (>500 lines - consider splitting)

### State Management

- âŒ Prop drilling (use context or composition)
- âŒ Mutating state directly
- âŒ Storing derived state

## ğŸ”§ Tools & Configuration

### Required Dev Tools

- TypeScript
- ESLint
- Prettier
- Tailwind CSS IntelliSense

### Code Formatting

- Run `prettier` before committing
- Follow existing `.prettierrc` configuration
- Use 2 spaces for indentation

## ğŸ“š Component Libraries

### Allowed

- âœ… Framer Motion (animations)
- âœ… React Icons (icons)
- âœ… DaisyUI (UI components)
- âœ… Tailwind CSS (styling)

### Avoid

- âŒ Other animation libraries
- âŒ Other CSS frameworks
- âŒ jQuery or legacy libraries

## ğŸ¨ UI/UX Standards

### Loading States

- Use skeleton loaders with Framer Motion
- Match skeleton structure to actual content
- Implement stagger animations for lists

### Forms

- Use controlled components
- Implement proper validation
- Show clear error messages
- Provide loading states for submissions

### Tables

- Use `CustomTable` component
- Implement proper loading states
- Support mobile responsive card view
- Include search and filtering when applicable

## ğŸ›ï¸ Business Logic Separation (CRITICAL)

### Architecture Philosophy

**CRITICAL**: Separate business logic from UI components for:
- âœ… Code reusability across web and React Native apps
- âœ… Easier testing and maintenance
- âœ… Clear separation of concerns
- âœ… Shared logic between platforms

### Folder Structure

```
src/
â”œâ”€â”€ app/                          # Next.js app router (UI only)
â”œâ”€â”€ components/                   # Presentational components (UI only)
â”œâ”€â”€ services/                     # ğŸ”¥ BUSINESS LOGIC LAYER
â”‚   â”œâ”€â”€ attendance/
â”‚   â”‚   â”œâ”€â”€ attendanceService.ts  # Core business logic
â”‚   â”‚   â””â”€â”€ attendanceValidation.ts
â”‚   â”œâ”€â”€ employee/
â”‚   â”‚   â”œâ”€â”€ employeeService.ts
â”‚   â”‚   â””â”€â”€ employeeTransformers.ts
â”‚   â””â”€â”€ auth/
â”‚       â””â”€â”€ authService.ts
â”œâ”€â”€ hooks/                        # ğŸ”¥ REACT-SPECIFIC BUSINESS LOGIC
â”‚   â”œâ”€â”€ useAttendance.ts          # Business logic + React integration
â”‚   â”œâ”€â”€ useEmployeeData.ts
â”‚   â””â”€â”€ useAuth.ts
â”œâ”€â”€ graphql/                      # GraphQL queries/mutations (data layer)
â”œâ”€â”€ utils/                        # Pure utility functions (helpers)
â”‚   â”œâ”€â”€ formatters/               # Data formatters
â”‚   â”œâ”€â”€ validators/               # Validation functions
â”‚   â””â”€â”€ calculations/             # Business calculations
â””â”€â”€ types/                        # TypeScript interfaces
```

### Service Layer Pattern

**Services** contain pure business logic (platform-agnostic):

```tsx
// âœ… GOOD: services/attendance/attendanceService.ts
export class AttendanceService {
  // CALCULATE WORK HOURS
  static calculateWorkHours(punchIn: Date, punchOut: Date): number {
    const diff = punchOut.getTime() - punchIn.getTime();
    return diff / (1000 * 60 * 60); // Convert to hours
  }

  // VALIDATE ATTENDANCE
  static validateAttendance(data: IAttendanceInput): IValidationResult {
    // Business validation logic
    if (!data.punchIn) {
      return { valid: false, error: "Punch in time required" };
    }
    return { valid: true };
  }

  // DETERMINE STATUS
  static determineAttendanceStatus(
    punchIn: Date,
    scheduledTime: Date,
    tolerance: number
  ): AttendanceStatus {
    // Business logic for status determination
    const diff = punchIn.getTime() - scheduledTime.getTime();
    if (diff > tolerance * 60 * 1000) return "late";
    return "on-time";
  }
}
```

### Custom Hooks Pattern

**Hooks** integrate services with React (web/React Native):

```tsx
// âœ… GOOD: hooks/useAttendance.ts
import { useState } from "react";
import { useMutation } from "@apollo/client";
import { AttendanceService } from "@/services/attendance/attendanceService";
import { CREATE_ATTENDANCE } from "@/graphql/attendance.api";

export function useAttendance() {
  // REACT STATE
  const [isProcessing, setIsProcessing] = useState(false);
  
  // GRAPHQL MUTATION
  const [createAttendance] = useMutation(CREATE_ATTENDANCE);

  // BUSINESS LOGIC METHOD
  const submitAttendance = async (data: IAttendanceInput) => {
    setIsProcessing(true);
    
    try {
      // USE SERVICE FOR VALIDATION
      const validation = AttendanceService.validateAttendance(data);
      if (!validation.valid) {
        throw new Error(validation.error);
      }

      // USE SERVICE FOR CALCULATION
      const hours = AttendanceService.calculateWorkHours(
        data.punchIn,
        data.punchOut
      );

      // SAVE TO BACKEND
      await createAttendance({
        variables: { ...data, workHours: hours }
      });
    } finally {
      setIsProcessing(false);
    }
  };

  return { submitAttendance, isProcessing };
}
```

### Component Pattern (UI Only)

**Components** should ONLY handle presentation:

```tsx
// âœ… GOOD: Components use hooks, not direct business logic
export default function AttendancePage() {
  // USE HOOK FOR BUSINESS LOGIC
  const { submitAttendance, isProcessing } = useAttendance();

  // UI-ONLY LOGIC
  const handleSubmit = async (formData: IFormData) => {
    await submitAttendance(formData);
  };

  // RENDER UI
  return <form onSubmit={handleSubmit}>...</form>;
}
```

### What Goes Where?

#### âœ… Services (`/services`)
- Business calculations
- Business validation rules
- Data transformations
- Business state machines
- Domain-specific logic
- **Platform-agnostic** (works in web & React Native)

#### âœ… Hooks (`/hooks`)
- React integration layer
- GraphQL mutations/queries integration
- React state management
- Side effects (useEffect)
- **React-specific** (uses React APIs)

#### âœ… Utils (`/utils`)
- Pure helper functions
- Formatters (dates, currency)
- Validators (email, phone)
- Constants
- **No business logic**

#### âœ… Components (`/components`, `/app`)
- UI rendering only
- User interactions
- Event handlers (call hooks)
- **No business logic**
- **No direct GraphQL calls**

### Anti-Patterns to AVOID

```tsx
// âŒ BAD: Business logic in component
export default function AttendancePage() {
  const handleSubmit = (data) => {
    // âŒ Business logic in component
    const diff = data.punchOut.getTime() - data.punchIn.getTime();
    const hours = diff / (1000 * 60 * 60);
    
    if (hours < 0) {
      // âŒ Validation in component
      return alert("Invalid times");
    }
    
    // Save...
  };
}

// âŒ BAD: Direct GraphQL in component
export default function AttendancePage() {
  const [createAttendance] = useMutation(CREATE_ATTENDANCE);
  
  const handleSubmit = async (data) => {
    // âŒ No hook abstraction
    await createAttendance({ variables: data });
  };
}
```

### Migration Strategy

When refactoring existing code:

1. **Identify business logic** in components
2. **Extract to services** (pure functions/classes)
3. **Create custom hooks** to integrate services with React
4. **Update components** to use hooks only

### Testing Benefits

```tsx
// âœ… Test business logic independently (no React)
import { AttendanceService } from "@/services/attendance/attendanceService";

test("calculates work hours correctly", () => {
  const punchIn = new Date("2024-01-01T09:00:00");
  const punchOut = new Date("2024-01-01T17:00:00");
  
  const hours = AttendanceService.calculateWorkHours(punchIn, punchOut);
  
  expect(hours).toBe(8);
});
```

### Cross-Platform Reusability

For React Native app:

```tsx
// âœ… REUSE: Same service in React Native
import { AttendanceService } from "@/services/attendance/attendanceService";

// âœ… REUSE: Same hook pattern (different GraphQL client)
export function useAttendance() {
  // React Native-specific GraphQL client
  const [createAttendance] = useMutation(CREATE_ATTENDANCE);
  
  // âœ… SAME SERVICE LOGIC
  const submitAttendance = async (data: IAttendanceInput) => {
    const validation = AttendanceService.validateAttendance(data);
    // ... rest of logic
  };
}
```

### Quick Checklist for Business Logic

When adding new features:

1. âœ… Is there business logic? â†’ Create a service
2. âœ… Need React integration? â†’ Create a custom hook
3. âœ… GraphQL call needed? â†’ Use hook, not component
4. âœ… Pure helper function? â†’ Add to utils
5. âœ… Component only renders UI and calls hooks

---

## ğŸ“‹ Quick Reference

**When creating a new component:**

1. âœ… Props interface starts with `I`
2. âœ… Use Framer Motion for animations
3. âœ… Add uppercase section comments
4. âœ… Follow component structure pattern
5. âœ… Use semantic HTML
6. âœ… Implement loading states
7. âœ… **NO business logic - use hooks**
8. âœ… **NO direct GraphQL - use hooks**

**When adding business logic:**

1. âœ… Extract to service class/functions
2. âœ… Make services platform-agnostic
3. âœ… Create custom hook for React integration
4. âœ… Components call hooks only
5. âœ… Write tests for services independently

**When adding animations:**

1. âœ… Import `motion` from Framer Motion
2. âœ… Define variants for reusability
3. âœ… Use stagger for lists
4. âœ… Keep animations subtle and professional
5. âœ… Use `easeOut` for entrances, `easeInOut` for loops

**When writing interfaces:**

1. âœ… Always use `I` prefix
2. âœ… Document complex props with comments
3. âœ… Use optional `?` sparingly, prefer defaults
4. âœ… Export from main types file when shared

---

_These rules ensure consistency, maintainability, cross-platform reusability, and professional quality across the codebase._

